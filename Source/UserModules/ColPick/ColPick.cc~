#include "ColPick.h"

#include <iostream>
using namespace std;

using namespace ikaros;

void
ColPick::Init()
{
  pict = GetInputMatrix("PICT");
  col = GetOutputArray("COL");

  uLimit = GetIntValue("uLimit");
  lLimit = GetIntValue("lLimit");
  mode = GetIntValue("mode");
}



void
ColPick::Tick()
{
  for(int i=0; i<50; ++i){
    col[i] = 0;
  }
  if(mode==0){
    for(int i=0; i<50; ++i){
      for(int j=lLimit; j<uLimit+1; ++j){
	col[i] += pict[i][j];
      }
    }
  }
  else if(mode==1){
    for(int i=0; i<50; ++i){
      for(int j=lLimit; j<uLimit+1; ++j){
	col[i] += pict[j][i];
      }
    }
  }
  for(int i=0; i<50; ++i){
    col[i]=col[i]/(1+uLimit-lLimit);
    //cout << col[i] << " ";
  }
  //cout << "\n";
}



static InitClass init("ColPick", &ColPick::Create, "Source/UserModules/ColPick/");


